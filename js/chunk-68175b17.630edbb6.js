(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-68175b17"],{"18bb":function(t,e,a){t.exports=a.p+"img/好眠乳膠枕.958b285b.png"},"395d":function(t,e,a){"use strict";a.r(e);a("99af"),a("b0c0"),a("b64b");var c=a("7a23"),l=a("18bb"),n=a.n(l),o={class:"carts"},s={class:"d-md-block d-none",style:{"margin-bottom":"100px","padding-top":"130px"}},i={style:{width:"80%"},class:"mx-auto mb-3 d-flex justify-content-between"},r=Object(c["h"])("h1",null,"購物車",-1),d=["disabled"],b={key:0,class:"fas fa-spinner fa-pulse"},u=Object(c["j"])("清空購物車 "),h={key:0,class:"table align-middle mx-auto",style:{width:"80%"}},m=Object(c["h"])("thead",null,[Object(c["h"])("tr",null,[Object(c["h"])("th",null,"圖片"),Object(c["h"])("th",null,"商品名稱"),Object(c["h"])("th",null,"數量"),Object(c["h"])("th",null,"價格"),Object(c["h"])("th",null,"刪除")])],-1),j={style:{width:"200px"}},O=["onUpdate:modelValue","onChange","disabled"],f=["value"],p=["onClick","disabled"],g={key:1,class:"noneCart mx-auto text-center border-top border-dark",style:{width:"80%"}},v=Object(c["h"])("h1",null,"購物車無商品，立刻逛逛!",-1),y=Object(c["h"])("img",{src:n.a,alt:"好眠乳膠枕"},null,-1),k={class:"w-100"},x={style:{width:"80%"},class:"mx-auto d-flex justify-content-end"},w={key:0},C={class:"d-md-none w-100 m-0",style:{"margin-bottom":"100px","padding-top":"130px"}},I={style:{width:"80%","border-bottom":"1px solid #000"},class:"mx-auto mb-3 d-flex justify-content-between"},S=Object(c["h"])("h1",null,"購物車",-1),V=["disabled"],A={key:0,class:"fas fa-spinner fa-pulse"},q=Object(c["j"])("清空購物車 "),N={key:0},U={class:"card",style:{width:"100%"}},z={class:"card-body d-flex"},$={style:{width:"100px"}},_={style:{width:"400px"}},F={class:"text-center mb-3"},K=["onUpdate:modelValue","onChange","disabled"],L=["value"],Z={class:"text-center"},E=Object(c["h"])("span",null,"金額:",-1),J=["onClick","disabled"],T={key:1,class:"noneCart mx-auto text-center",style:{width:"80%"}},M=Object(c["h"])("h1",null,"購物車無商品，立刻逛逛!",-1),X=Object(c["h"])("img",{src:n.a,alt:"好眠乳膠枕"},null,-1),Y={class:"w-100"},B={style:{width:"80%"},class:"mx-auto d-flex justify-content-end"},D={key:0},G=Object(c["h"])("div",{class:"w-50 mx-auto mt-5 mb-3",style:{"border-bottom":"1px solid #000"}},[Object(c["h"])("h1",null,"訂購人資訊")],-1),H={class:"mb-5 row justify-content-center"},P={class:"mb-3"},Q=Object(c["h"])("label",{for:"name",class:"form-label"},[Object(c["j"])("收件人姓名"),Object(c["h"])("span",{class:"px-1",style:{color:"#f00"}},"*")],-1),R={class:"mb-3"},W=Object(c["h"])("label",{for:"email",class:"form-label"},[Object(c["j"])("收件人電子郵件"),Object(c["h"])("span",{class:"px-1",style:{color:"#f00"}},"*")],-1),tt={class:"mb-3"},et=Object(c["h"])("label",{for:"tel",class:"form-label"},[Object(c["j"])("收件人電話"),Object(c["h"])("span",{class:"px-1",style:{color:"#f00"}},"*")],-1),at={class:"mb-3"},ct=Object(c["h"])("label",{for:"address",class:"form-label"},[Object(c["j"])("收件人地址"),Object(c["h"])("span",{class:"px-1",style:{color:"#f00"}},"*")],-1),lt={class:"mb-3"},nt=Object(c["h"])("label",{for:"message",class:"form-label"},"留言",-1),ot={class:"text-end"},st=["disabled"];function it(t,e,a,l,n,it){var rt=Object(c["K"])("Loading"),dt=Object(c["K"])("NavbarView"),bt=Object(c["K"])("Field"),ut=Object(c["K"])("ErrorMessage"),ht=Object(c["K"])("Form"),mt=Object(c["K"])("FooterView");return Object(c["A"])(),Object(c["g"])("div",o,[Object(c["k"])(rt,{active:n.isLoading},null,8,["active"]),Object(c["k"])(dt),Object(c["h"])("div",s,[Object(c["h"])("div",i,[r,Object(c["h"])("button",{type:"button",class:"btn btn-outline-secondary mb-3",onClick:e[0]||(e[0]=function(t){return it.deleteAllCarts("open")}),disabled:0===n.cart.carts.length||"open"===n.loadingStatus.loadingItem},["open"===n.loadingStatus.loadingItem?(Object(c["A"])(),Object(c["g"])("i",b)):Object(c["f"])("",!0),u],8,d)]),n.cart.carts.length>0?(Object(c["A"])(),Object(c["g"])("table",h,[m,Object(c["h"])("tbody",null,[(Object(c["A"])(!0),Object(c["g"])(c["a"],null,Object(c["I"])(n.cart.carts,(function(t){return Object(c["A"])(),Object(c["g"])("tr",{key:t.id},[Object(c["h"])("td",j,[Object(c["h"])("div",{style:Object(c["u"])([{height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:"url(".concat(t.product.imageUrl,")")}])},null,4)]),Object(c["h"])("td",null,Object(c["N"])(t.product.title),1),Object(c["h"])("td",null,[Object(c["Z"])(Object(c["h"])("select",{name:"productNum",class:"form-select",style:{width:"100%"},"onUpdate:modelValue":function(e){return t.qty=e},onChange:function(e){return it.updateCart(t)},disabled:n.loadingStatus.loadingItem===t.id},[(Object(c["A"])(),Object(c["g"])(c["a"],null,Object(c["I"])(8,(function(e){return Object(c["h"])("option",{value:e,key:"".concat(e).concat(t.id)},Object(c["N"])(e),9,f)})),64))],40,O),[[c["S"],t.qty]])]),Object(c["h"])("td",null,Object(c["N"])(t.product.price*t.qty),1),Object(c["h"])("td",null,[Object(c["h"])("i",{class:"fas fa-trash-alt w-100",type:"button",onClick:function(e){return it.removeCartItem(t)},disabled:n.loadingStatus.loadingItem===t.id},null,8,p)])])})),128))])])):(Object(c["A"])(),Object(c["g"])("div",g,[v,y,Object(c["h"])("button",{type:"button",class:"btn btn-secondary d-block mx-auto mt-2",onClick:e[1]||(e[1]=function(t){return it.redirect()})},"前往商品列表")])),Object(c["h"])("div",k,[Object(c["h"])("div",x,[n.cart.final_total>0?(Object(c["A"])(),Object(c["g"])("h2",w,"總金額:"+Object(c["N"])(n.cart.final_total),1)):Object(c["f"])("",!0)])])]),Object(c["h"])("ul",C,[Object(c["h"])("div",I,[S,Object(c["h"])("button",{type:"button",class:"btn btn-outline-secondary mb-3",onClick:e[2]||(e[2]=function(t){return it.deleteAllCarts("open")}),disabled:0===n.cart.carts.length||"open"===n.loadingStatus.loadingItem},["open"===n.loadingStatus.loadingItem?(Object(c["A"])(),Object(c["g"])("i",A)):Object(c["f"])("",!0),q],8,V)]),n.cart.carts.length>0?(Object(c["A"])(),Object(c["g"])("div",N,[(Object(c["A"])(!0),Object(c["g"])(c["a"],null,Object(c["I"])(n.cart.carts,(function(t){return Object(c["A"])(),Object(c["g"])("li",{key:t,class:"mx-auto mb-3",style:{width:"80%"}},[Object(c["h"])("div",U,[Object(c["h"])("div",z,[Object(c["h"])("div",$,[Object(c["h"])("div",{style:Object(c["u"])([{height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:"url(".concat(t.product.imageUrl,")")}])},null,4)]),Object(c["h"])("div",_,[Object(c["h"])("div",F,Object(c["N"])(t.product.title),1),Object(c["Z"])(Object(c["h"])("select",{name:"productNum",class:"form-select mx-auto mb-3",style:{width:"80%"},"onUpdate:modelValue":function(e){return t.qty=e},onChange:function(e){return it.updateCart(t)},disabled:n.loadingStatus.loadingItem===t.id},[(Object(c["A"])(),Object(c["g"])(c["a"],null,Object(c["I"])(8,(function(e){return Object(c["h"])("option",{value:e,key:"".concat(e).concat(t.id)},Object(c["N"])(e),9,L)})),64))],40,K),[[c["S"],t.qty]]),Object(c["h"])("div",Z,[E,Object(c["j"])(" "+Object(c["N"])(t.product.price*t.qty)+" ",1),Object(c["h"])("i",{class:"fas fa-trash-alt px-5",type:"button",onClick:function(e){return it.removeCartItem(t)},disabled:n.loadingStatus.loadingItem===t.id},null,8,J)])])])])])})),128))])):(Object(c["A"])(),Object(c["g"])("div",T,[M,X,Object(c["h"])("button",{type:"button",class:"btn btn-secondary d-block mx-auto mt-2",onClick:e[3]||(e[3]=function(t){return it.redirect()})},"前往商品列表")])),Object(c["h"])("div",Y,[Object(c["h"])("div",B,[n.cart.final_total>0?(Object(c["A"])(),Object(c["g"])("h2",D,"總金額:"+Object(c["N"])(n.cart.final_total),1)):Object(c["f"])("",!0)])])]),G,Object(c["h"])("div",H,[Object(c["k"])(ht,{ref:"form",class:"col-md-6",onSubmit:it.createOrder},{default:Object(c["Y"])((function(t){var a=t.errors;return[Object(c["h"])("div",P,[Q,Object(c["k"])(bt,{id:"name",name:"姓名",type:"text",class:Object(c["t"])(["form-control",{"is-invalid":a["姓名"]}]),placeholder:"請輸入姓名",rules:"required",modelValue:n.form.user.name,"onUpdate:modelValue":e[4]||(e[4]=function(t){return n.form.user.name=t})},null,8,["class","modelValue"]),Object(c["k"])(ut,{name:"姓名",class:"invalid-feedback"})]),Object(c["h"])("div",R,[W,Object(c["k"])(bt,{id:"email",name:"email",type:"email",class:Object(c["t"])(["form-control",{"is-invalid":a["email"]}]),placeholder:"請輸入電子郵件",rules:"email|required",modelValue:n.form.user.email,"onUpdate:modelValue":e[5]||(e[5]=function(t){return n.form.user.email=t})},null,8,["class","modelValue"]),Object(c["k"])(ut,{name:"email",class:"invalid-feedback"})]),Object(c["h"])("div",tt,[et,Object(c["k"])(bt,{id:"tel",name:"電話",type:"text",class:Object(c["t"])(["form-control",{"is-invalid":a["電話"]}]),placeholder:"請輸入電話",rules:"required|min:8|max:10",modelValue:n.form.user.tel,"onUpdate:modelValue":e[6]||(e[6]=function(t){return n.form.user.tel=t})},null,8,["class","modelValue"]),Object(c["k"])(ut,{name:"電話",class:"invalid-feedback"})]),Object(c["h"])("div",at,[ct,Object(c["k"])(bt,{id:"address",name:"地址",type:"text",class:Object(c["t"])(["form-control",{"is-invalid":a["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:n.form.user.address,"onUpdate:modelValue":e[7]||(e[7]=function(t){return n.form.user.address=t})},null,8,["class","modelValue"]),Object(c["k"])(ut,{name:"地址",class:"invalid-feedback"})]),Object(c["h"])("div",lt,[nt,Object(c["Z"])(Object(c["h"])("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":e[8]||(e[8]=function(t){return n.form.message=t})},null,512),[[c["T"],n.form.message]])]),Object(c["h"])("div",ot,[Object(c["h"])("button",{type:"submit",class:"btn btn-danger",disabled:Object.keys(a).length>0||0===n.cart.carts.length},"送出訂單",8,st)])]})),_:1},8,["onSubmit"])]),Object(c["k"])(mt)])}var rt=a("f796"),dt=a("1652"),bt={name:"Carts",data:function(){return{loadingStatus:{loadingItem:""},isLoading:!1,cart:{carts:[]},form:{user:{name:"",email:"",tel:"",address:""},message:""}}},components:{FooterView:rt["a"],NavbarView:dt["a"]},mounted:function(){this.getCart()},methods:{getCart:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/v2/","/api/").concat("wei-z","/cart");this.isLoading=!0,this.$http.get(e).then((function(e){t.cart=e.data.data,t.isLoading=!1})).catch((function(t){alert(t.data.message)}))},updateCart:function(t){var e=this;this.loadingStatus.loadingItem=t.id;var a="".concat("https://vue3-course-api.hexschool.io/v2/","/api/").concat("wei-z","/cart/").concat(t.id),c={product_id:t.product_id,qty:t.qty};this.$http.put(a,{data:c}).then((function(t){alert(t.data.message),e.loadingStatus.loadingItem="",e.getCart()})).catch((function(t){alert(t.data.message),e.loadingStatus.loadingItem=""}))},removeCartItem:function(t){var e=this,a="".concat("https://vue3-course-api.hexschool.io/v2/","/api/").concat("wei-z","/cart/").concat(t.id);this.loadingStatus.loadingItem=t.id,this.$http.delete(a).then((function(t){alert(t.data.message),e.loadingStatus.loadingItem="",e.getCart()})).catch((function(t){alert(t.data.message)}))},deleteAllCarts:function(t){var e=this,a="".concat("https://vue3-course-api.hexschool.io/v2/","/api/").concat("wei-z","/carts");this.loadingStatus.loadingItem=t,this.$http.delete(a).then((function(t){alert(t.data.message),e.loadingStatus.loadingItem="",e.getCart()})).catch((function(t){alert(t.data.message)}))},redirect:function(){this.$router.push("/products")},createOrder:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/v2/","/api/").concat("wei-z","/order"),a=this.form;this.$http.post(e,{data:a}).then((function(e){alert(e.data.message),t.$refs.form.resetForm(),t.getCart()})).catch((function(t){alert(t.data.message)}))}}},ut=a("d959"),ht=a.n(ut);const mt=ht()(bt,[["render",it]]);e["default"]=mt},b0c0:function(t,e,a){var c=a("83ab"),l=a("5e77").EXISTS,n=a("e330"),o=a("9bf2").f,s=Function.prototype,i=n(s.toString),r=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,d=n(r.exec),b="name";c&&!l&&o(s,b,{configurable:!0,get:function(){try{return d(r,i(this))[1]}catch(t){return""}}})}}]);
//# sourceMappingURL=chunk-68175b17.630edbb6.js.map